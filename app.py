import streamlit as st
import plotly.graph_objects as go
import numpy as np

st.set_page_config(page_title="–°–∏–º—É–ª–∞—Ü–∏—è: –°–±–ª—ä—Å—ä–∫ –Ω–∞ —á–∞—Å—Ç–∏—Ü–∏", layout="centered")

st.title("üî¨ –°–∏–º—É–ª–∞—Ü–∏—è: –°–±–ª—ä—Å—ä–∫ –Ω–∞ —á–∞—Å—Ç–∏—Ü–∏")
st.markdown("""
–î–æ–±—Ä–µ –¥–æ—à—ä–ª –≤ —Å–∏–º—É–ª–∞—Ü–∏—è—Ç–∞, –≤–¥—ä—Ö–Ω–æ–≤–µ–Ω–∞ –æ—Ç –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è—Ç–∞ –≤ **–¶–ï–†–ù**!

–©–µ –º–æ–¥–µ–ª–∏—Ä–∞–º–µ —á–µ–ª–µ–Ω —Å–±–ª—ä—Å—ä–∫ –º–µ–∂–¥—É –¥–≤–µ —á–∞—Å—Ç–∏—Ü–∏. –í—ä–≤–µ–¥–∏ –Ω–∞—á–∞–ª–Ω–∏—Ç–µ –∏–º –º–∞—Å–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏.
""")

# –í—ä–≤–µ–∂–¥–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏ –æ—Ç —É—á–µ–Ω–∏–∫–∞
st.sidebar.header("üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ —á–∞—Å—Ç–∏—Ü–∏—Ç–µ")
m1 = st.sidebar.slider("–ú–∞—Å–∞ –Ω–∞ —á–∞—Å—Ç–∏—Ü–∞ 1 (kg)", 1.0, 10.0, 5.0)
v1 = st.sidebar.slider("–ù–∞—á–∞–ª–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç –Ω–∞ —á–∞—Å—Ç–∏—Ü–∞ 1 (m/s)", -10.0, 10.0, 5.0)

m2 = st.sidebar.slider("–ú–∞—Å–∞ –Ω–∞ —á–∞—Å—Ç–∏—Ü–∞ 2 (kg)", 1.0, 10.0, 5.0)
v2 = st.sidebar.slider("–ù–∞—á–∞–ª–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç –Ω–∞ —á–∞—Å—Ç–∏—Ü–∞ 2 (m/s)", -10.0, 10.0, -3.0)

st.markdown("## ‚öôÔ∏è –ò–∑—á–∏—Å–ª–µ–Ω–∏—è")

# –ò–∑—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏ –∏–¥–µ–∞–ª–Ω–æ –µ–ª–∞—Å—Ç–∏—á–µ–Ω —Å–±–ª—ä—Å—ä–∫ (–∑–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –∏–º–ø—É–ª—Å–∞ –∏ –µ–Ω–µ—Ä–≥–∏—è—Ç–∞)
v1_final = ((m1 - m2)/(m1 + m2)) * v1 + ((2 * m2)/(m1 + m2)) * v2
v2_final = ((2 * m1)/(m1 + m2)) * v1 + ((m2 - m1)/(m1 + m2)) * v2

st.write(f"**–°–∫–æ—Ä–æ—Å—Ç —Å–ª–µ–¥ —Å–±–ª—ä—Å—ä–∫–∞:**")
st.write(f"–ß–∞—Å—Ç–∏—Ü–∞ 1: `{v1_final:.2f} m/s`")
st.write(f"–ß–∞—Å—Ç–∏—Ü–∞ 2: `{v2_final:.2f} m/s`")

# –ì—Ä–∞—Ñ–∏–∫–∞ —Å Plotly
st.markdown("## üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è")

fig = go.Figure()

# –ü–æ–∫–∞–∑–≤–∞–º–µ –Ω–∞—á–∞–ª–Ω–∏—Ç–µ –∏ –∫—Ä–∞–π–Ω–∏—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
fig.add_trace(go.Bar(name="–ü—Ä–µ–¥–∏ —Å–±–ª—ä—Å—ä–∫–∞", x=["–ß–∞—Å—Ç–∏—Ü–∞ 1", "–ß–∞—Å—Ç–∏—Ü–∞ 2"], y=[v1, v2]))
fig.add_trace(go.Bar(name="–°–ª–µ–¥ —Å–±–ª—ä—Å—ä–∫–∞", x=["–ß–∞—Å—Ç–∏—Ü–∞ 1", "–ß–∞—Å—Ç–∏—Ü–∞ 2"], y=[v1_final, v2_final]))

fig.update_layout(barmode='group', yaxis_title="–°–∫–æ—Ä–æ—Å—Ç (m/s)", height=400)
st.plotly_chart(fig)

# –ò–∑—á–∏—Å–ª—è–≤–∞–º–µ –∏–º–ø—É–ª—Å–∞ –∏ –µ–Ω–µ—Ä–≥–∏—è—Ç–∞ –ø—Ä–µ–¥–∏ –∏ —Å–ª–µ–¥
momentum_before = m1 * v1 + m2 * v2
momentum_after = m1 * v1_final + m2 * v2_final
energy_before = 0.5 * m1 * v1**2 + 0.5 * m2 * v2**2
energy_after = 0.5 * m1 * v1_final**2 + 0.5 * m2 * v2_final**2

st.markdown("## üîé –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ñ–∏–∑–∏—á–Ω–∏—Ç–µ –∑–∞–∫–æ–Ω–∏")
st.write(f"**–ò–º–ø—É–ª—Å –ø—Ä–µ–¥–∏ —Å–±–ª—ä—Å—ä–∫–∞:** `{momentum_before:.2f}` kg¬∑m/s")
st.write(f"**–ò–º–ø—É–ª—Å —Å–ª–µ–¥ —Å–±–ª—ä—Å—ä–∫–∞:** `{momentum_after:.2f}` kg¬∑m/s")
st.write(f"**–ö–∏–Ω–µ—Ç–∏—á–Ω–∞ –µ–Ω–µ—Ä–≥–∏—è –ø—Ä–µ–¥–∏:** `{energy_before:.2f}` J")
st.write(f"**–ö–∏–Ω–µ—Ç–∏—á–Ω–∞ –µ–Ω–µ—Ä–≥–∏—è —Å–ª–µ–¥:** `{energy_after:.2f}` J")

st.success("üìò –ó–∞–∫–æ–Ω–∏—Ç–µ –∑–∞ –∑–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –∏–º–ø—É–ª—Å–∞ –∏ –µ–Ω–µ—Ä–≥–∏—è—Ç–∞ –∏–∑–≥–ª–µ–∂–¥–∞ —Å–µ —Å–ø–∞–∑–≤–∞—Ç!")

# –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–µ–Ω –≤—ä–ø—Ä–æ—Å
st.markdown("---")
st.markdown("## üß† –í—ä–ø—Ä–æ—Å –∑–∞ —Ä–∞–∑–±–∏—Ä–∞–Ω–µ")

st.markdown("**–ê–∫–æ –º–∞—Å–∞—Ç–∞ –Ω–∞ —á–∞—Å—Ç–∏—Ü–∞ 1 —Å–µ —É–¥–≤–æ–∏, –∫–∞–∫–≤–æ —â–µ —Å—Ç–∞–Ω–µ —Å—ä—Å —Å–∫–æ—Ä–æ—Å—Ç—Ç–∞ —ù —Å–ª–µ–¥ —Å–±–ª—ä—Å—ä–∫–∞?**")

answer = st.radio("–ò–∑–±–µ—Ä–∏ –æ—Ç–≥–æ–≤–æ—Ä:", [
    "–©–µ —Å–µ —É–≤–µ–ª–∏—á–∏",
    "–©–µ —Å–µ –Ω–∞–º–∞–ª–∏",
    "–ù—è–º–∞ –¥–∞ —Å–µ –ø—Ä–æ–º–µ–Ω–∏",
    "–ó–∞–≤–∏—Å–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç—Ç–∞ –Ω–∞ –¥—Ä—É–≥–∞—Ç–∞ —á–∞—Å—Ç–∏—Ü–∞"
])

if st.button("üì© –ò–∑–ø—Ä–∞—Ç–∏ –æ—Ç–≥–æ–≤–æ—Ä"):
    if answer == "–ó–∞–≤–∏—Å–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç—Ç–∞ –Ω–∞ –¥—Ä—É–≥–∞—Ç–∞ —á–∞—Å—Ç–∏—Ü–∞":
        st.success("‚úÖ –í–µ—Ä–µ–Ω –æ—Ç–≥–æ–≤–æ—Ä! –û—Ç–ª–∏—á–Ω–æ —Ä–∞–∑—Å—ä–∂–¥–µ–Ω–∏–µ.")
    else:
        st.error("‚ùå –ù–µ –µ –Ω–∞–ø—ä–ª–Ω–æ –≤—è—Ä–Ω–æ. –ü–æ–º–∏—Å–ª–∏ –∑–∞ –∑–∞–ø–∞–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ –∏–º–ø—É–ª—Å–∞.")

# –ù–∞–ø—Ä–∞–≤–∏ —Ö–∏–ø–æ—Ç–µ–∑–∞
st.markdown("---")
st.markdown("## üî¨ –ù–∞–ø—Ä–∞–≤–∏ —Ö–∏–ø–æ—Ç–µ–∑–∞ –∏ —Ç–µ—Å—Ç–≤–∞–π")

st.markdown("""
1. –ü—Ä–æ–º–µ–Ω–∏ –º–∞—Å–∏—Ç–µ –∏–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏—Ç–µ.
2. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏ –∫–∞–∫–≤–æ —â–µ —Å–µ —Å–ª—É—á–∏.
3. –ù–∞–±–ª—é–¥–∞–≤–∞–π —Ä–µ–∑—É–ª—Ç–∞—Ç–∞.
4. –°—Ä–∞–≤–Ω–∏ —Å —Ç–≤–æ—è—Ç–∞ —Ö–∏–ø–æ—Ç–µ–∑–∞.

üìù –ó–∞–ø–∏—à–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è—Ç–∞ —Å–∏ –∏ –æ—Ç–≥–æ–≤–æ—Ä–∏ –Ω–∞ –≤—ä–ø—Ä–æ—Å–∞: **"–ö–æ–µ –æ–∫–∞–∑–≤–∞ –Ω–∞–π-–≥–æ–ª—è–º–æ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞?"**
""")

st.markdown("---")
st.markdown("üìå _–ò–∑—Ç–æ—á–Ω–∏–∫ –Ω–∞ –≤–¥—ä—Ö–Ω–æ–≤–µ–Ω–∏–µ: –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è—Ç–∞ –≤ –¶–ï–†–ù –∏ –∑–∞–∫–æ–Ω–∞ –∑–∞ –∑–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –∏–º–ø—É–ª—Å–∞._")
